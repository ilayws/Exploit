extends Node2D

var bg
var scroll

func _ready() -> void:
	var rscale = randf()*0.3+0.2
	scroll = rscale * 0.4/0.3
	
	bg = get_parent().get_parent()
	bg.layer = -13
	bg.scroll_base_scale = Vector2(scroll, scroll)
	scale = Vector2(rscale, rscale)
	modulate.a = 0.5
	global_position = bg.get_parent().global_position

func _process(delta) -> void:
	
	global_position.x += scroll * delta * 8
	
	
	var return_offset = (randi() % 5) * [-1,1][randi()%2]
	if global_position.x-100> Global.view_end.x + 30 + return_offset:
		global_position.x = Global.view_start.x - 30 + return_offset
		global_position.y += return_offset/3
