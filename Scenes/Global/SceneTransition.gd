extends CanvasLayer


signal finished_in

var op_obj
var op_func

func start(obj, function):
	
	if op_obj and op_func:
		if is_connected("finished_in", op_obj, op_func):
			disconnect("finished_in", op_obj, op_func)
	
	Pause.pausable = false
	fade("to_black")
	if obj and function:
		op_obj = obj
		op_func = function
		connect("finished_in", op_obj, op_func)

func fade(animation):
	$ColorRect/AnimationPlayer.play(animation)



func _on_animation_finished(anim_name):
	if anim_name == "to_black":
		emit_signal("finished_in")
		fade("to_trans")
	else:
		Pause.pausable = true
