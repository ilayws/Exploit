extends CanvasLayer


onready var sprite_off = load("res://Assets/Sprites/controller_off.png")
onready var sprite_on = load("res://Assets/Sprites/controller_on.png")
export var camera_path : String = "../Player/Camera2D"
export var controllable : bool = true
onready var camera : Camera2D = get_node(camera_path)


export var tooltip : bool = false

func _ready() -> void:
	if Global.a_finished:
		controllable = true

func _process(_delta) -> void:
	
	$locked.visible = !camera.current
	
	if !controllable:
		$Control/Sprite.visible = false
		return
	
	if Input.is_action_just_pressed("control"):
		$Sound.play()
		camera.switch_mode()
		if camera.current:
			$AnimationPlayer.play("Shockwave")
	
	if tooltip and $Control.visible:
		$Control/CTRL.visible = !camera.current

	if camera.current:
		$Control/Sprite.texture = sprite_on
	else:
		$Control/Sprite.texture = sprite_off
