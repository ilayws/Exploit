extends Area2D

export(String, FILE, "*.tscn") var next_level = ""
export var tooltip_enabled : bool = false
var overlapping : bool = self.get_overlapping_bodies().size() > 0
var prevoverlap : bool

export var end_a : bool = false

func _ready() -> void:
	pass

func _process(_delta) -> void:
	
	overlapping = self.get_overlapping_bodies().size() > 0
	
	if overlapping:
		$Light2D.energy = 1.2
		if Input.is_action_just_pressed("interact"):
			if end_a:
				Global.on_finished_a()
			Global.target_scene = next_level
			SceneTransition.start(Global, "scene")
	else:
		$Light2D.energy = 1
			
	if !tooltip_enabled:
		return
	
	if overlapping != prevoverlap:
		if overlapping:
			$Tooltip/AnimationPlayer.play("Appear")
		else:
			$Tooltip/AnimationPlayer.play("Disappear")
	
	
	
	prevoverlap = overlapping



